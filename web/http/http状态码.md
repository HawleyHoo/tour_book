## http状态码

HTTP 状态码负责表示客户端 HTTP 请求的返回结果、标记服务器端的处理是否正常、通知出现的错误等工作.

### 状态码的类别

[RFC2616](http://pretty-rfc.herokuapp.com/RFC2616)定义的状态码，由3位数字和原因短语组成.
数字中的第一位指定了响应类别，后两位无分类.响应类别有以下5种:

|状态|类别|原因短语|
|--------|--------|--------|
|1XX|Informational（信息性状态码）|接收的请求正在处理|
|2XX|Success（成功状态码）|请求正常处理完毕|
|3XX|Redirection（重定向状态码）|需要进行附加操作(需执行某些特殊的处理)以完成请求|
|4XX|Client Error（客户端错误状态码）|服务器无法处理请求,客户端是发生错误的原因所在|
|5XX|Server Error（服务器错误状态码）|服务器处理请求出错|

### 2XX

- 200 OK : 请求已正常处理
- 204 No Content : 请求处理成功,但没有资源可返回.一般在只需要从客户端往服务器发送信息，而服务端不需返回信息内容的情况下使用.
- 206 Partial Content : 客户端发送了范围请求，而服务器成功执行了这部分的 GET 请求.响应报文中包含由 Content-Range 指定范围的实体内容.

### 3XX

- 301 Moved Permanently : 永久性重定向.该状态码表示请求的资源已被分配了新的 URI(即移到)，以后应使用资源现在所指的 URI.
- 302 Found : 临时性重定向.该状态码表示请求的资源已被分配了新的 URI，希望用户**本次**能使用新的 URI 访问.与 301 Moved Permanently 状态码相似，但 302 状态码代表的资源不是被永久移动，只是临时性质的.
- 303 See Other : 该状态码表示由于请求对应的资源存在着另一个 URI，应使用 GET 方法定向获取请求的资源.303 状态码和 302 Found 状态码有着相同的功能，但 303 状态码明确表示客户端应当采用 GET 方法获取资源，这点与 302 状态码有区别.
- 304 Not Modified : 该状态码表示客户端发送附带条件的请求(附带条件的请求是指采用 GET 方法的请求报文中包含 If-Match，If-Modified-Since，If-None-Match，If-Range，If-Unmodified-Since 中任一首部)时，服务器端允许请求访问资源，但未满足条件的情况(自从上次请求后，请求的网页未修改过).304 状态码返回时，不包含任何响应的主体部分.304 虽然被划分在 3XX 类别中，但是和重定向没有关系.常见于web缓存处理.
- 307 Temporary Redirect : 临时重定向. 该状态码与302和303的有着类似的含义，不同之处在于，307状态码并不会指定客户端要用什么样的请求方法请求重定向地址(302指定使用原有请求方法，303指定使用GET方法).

> 当 301、302、303 响应状态码返回时，几乎所有的浏览器都会把 POST 改成 GET，并删除请求报文内的主体，之后请求会自动再次发送.

## 4XX

- 400 Bad Request : 该状态码表示请求报文中存在语法错误当错误发生时，需修改请求的内容后再次发送请求.另外，浏览器会像 200 OK 一样对待该状态码.
- 401 Unauthorized : 该状态码表示发送的请求需要有通过 HTTP 认证（BASIC 认证、DIGEST 认证）的认证信息(即请求要求身份验证).另外若之前已进行过 1 次请求，则表示用户上一次认证失败.返回含有 401 的响应必须包含一个适用于被请求资源的 WWW-Authenticate 首部用以质询（challenge）用户信息.当浏览器初次接收到 401 响应，会弹出认证用的对话窗口.更多关于认证授权的信息关注RFC2617.
- 403 Forbidden : 该状态码表明对请求资源的访问被服务器拒绝了(服务器拒绝请求).服务器端没有必要给出拒绝的详细理由，但也可以在实体的主体部分对原因进行描述.(未获得文件系统的访问授权，访问权限出现某些问题（从未授权的发送源 IP 地址试图访问）等列举的情况都可能是发生 403 的原因).
- 404 Not Found : 该状态码表明服务器上无法找到请求的资源.除此之外，也可以在服务器端拒绝请求且不想说明理由时使用.

## 5XX

- 500 Internal Server Error : 服务器端在执行请求时发生了错误.也有可能是 Web 应用存在的 bug 或某些临时的故障.
- 503 Service Unavailable: 服务器暂时处于超负载或正在进行停机维护，现在无法处理请求.如果事先得知解除以上状况需要的时间，最好写入 RetryAfter 首部字段再返回给客户端.

> 状态码和状况的不一致
>
> 不少返回的状态码响应都是错误的，但是用户可能察觉不到这点。比如 **Web 应用程序内部发生错误，状态码依然返回 200 OK**，这种情况也经常遇到.
